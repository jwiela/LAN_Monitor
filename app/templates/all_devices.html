<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wszystkie urzƒÖdzenia - LAN Monitor</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="dashboard">
    <!-- Navbar -->
    {% include 'navbar.html' %}

    <!-- Komunikaty Flash -->
    <div class="container">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <!-- Wszystkie urzƒÖdzenia -->
        <div class="content-section">
            <div class="section-header">
                <h2>üì± Wszystkie urzƒÖdzenia ({{ total_devices }})</h2>
            </div>
            
            {% if active_devices or inactive_devices %}
                <div class="devices-table-container">
                    <table class="devices-table">
                        <thead>
                            <tr>
                                <th>Status</th>
                                <th>Nazwa</th>
                                <th>Adres IP</th>
                                <th>Adres MAC</th>
                                <th>Producent</th>
                                <th>Ostatnio widziane</th>
                                <th>Akcje</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for device in active_devices %}
                                <tr class="device-row">
                                    <td>
                                        <span class="status-badge status-online">‚úÖ Online</span>
                                    </td>
                                    <td class="device-name">{{ device.hostname or 'Nieznane urzƒÖdzenie' }}</td>
                                    <td>{{ device.ip_address }}</td>
                                    <td class="device-mac">{{ device.mac_address or '-' }}</td>
                                    <td>{{ device.vendor or '-' }}</td>
                                    <td class="device-last-seen">{{ device.last_seen.strftime('%Y-%m-%d %H:%M:%S') }}</td>
                                    <td>
                                        <a href="{{ url_for('main.device_detail_all', device_id=device.id) }}" class="btn btn-secondary btn-sm">Raporty</a>
                                    </td>
                                </tr>
                            {% endfor %}
                            {% for device in inactive_devices %}
                                <tr class="device-row device-offline">
                                    <td>
                                        <span class="status-badge status-offline">‚ö†Ô∏è Offline</span>
                                    </td>
                                    <td class="device-name">{{ device.hostname or 'Nieznane urzƒÖdzenie' }}</td>
                                    <td>{{ device.ip_address }}</td>
                                    <td class="device-mac">{{ device.mac_address or '-' }}</td>
                                    <td>{{ device.vendor or '-' }}</td>
                                    <td class="device-last-seen">{{ device.last_seen.strftime('%Y-%m-%d %H:%M:%S') }}</td>
                                    <td>
                                        <a href="{{ url_for('main.device_detail_all', device_id=device.id) }}" class="btn btn-secondary btn-sm">Raporty</a>
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <p style="text-align: center; color: #999; padding: 40px;">Brak urzƒÖdze≈Ñ w bazie danych</p>
            {% endif %}
        </div>
    </div>
</body>
</html>
